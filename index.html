<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>CLASSIC TOON TRIVIA</title>
        <link rel="stylesheet" href="assets/scripts/reset.css">

        <link href="https://fonts.googleapis.com/css?family=Bowlby+One|Bubblegum+Sans|Carter+One|Erica+One|Fascinate|Fontdiner+Swanky|Lilita+One|Rammetto+One|Sigmar+One|Suez+One" rel="stylesheet">
        <!-- MAKE SURE THIS IS LAST-->
        <link rel="stylesheet" type="text/css" href="assets/scripts/style.css">

    </head>

    <body>
        <audio id="titleAudio">
            <source src="assets/music/merry_melodies_opening.mp3" type="audio/mpeg">
        </audio>
        <audio controls loop id="gameAudio">
                <source src="assets/music/vaudeville.mp3" type="audio/mpeg">
        </audio>
        <div class="titleImage">
            <div class="ourQuizTitle"><img id= "titleCardPng" src="assets/images/titlecard.png"><div id="popInFace"><img src="assets/images/facepopin.png" id="facePopper" class="bounceIn"></div></div>
            <div class="rulesText"></div>
            <div class="startButton"><div id="clickThru">CLICK HERE TO BEGIN</div></div>
        </div>
        <div class="gamePlay">
            <div class="topGamebar">
                <div class="faceImage"></div>
                <div class="questionText"></div>
                <br>
                <div class="questionNumber"></div>
            </div>
            <div class="timeBar">
                <div id="extendingTimeBar"><div></div></div>
            </div>
            <div class="answer">
                <div class="answerTextButton aValue" value="a"></div>
                <div class="answerTextButton bValue" value="b"></div>
                <div class="answerTextButton cValue" value="c"></div>
                <div class="answerTextButton dValue" value="d"></div>
            </div>
            <div class="gameSolution">
                <div class="theCorrectAnswer"></div>
            </div>
        </div>
        <div class="gameFinalScore">
            <div class="finalScore"></div>
            <div class="playAgainButton">Play Again?</div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript">
            //CLASSIC ANIMATION TRIVIA GAME
            var questions = [
                {
                    question:'Gertie, star of one of the first cartoon shorts, was what sort of animal?',
                    a:'Cow',
                    b:'Giraffe',
                    c:'Dinosaur',
                    d:'Woodpecker', 
                    correctAnswer:'c'
                },
                {
                    question:'Merrie Melodies usually starred which cartoon group?',
                    a:'Mickey Mouse and Pals',
                    b:'Bugs Bunny and Friends',
                    c:'Heathcliff and the Junkyard Jazz Cats',
                    d:'He-man and the Masters of the Universe', 
                    correctAnswer:'b'
                },
                {
                    question:'Prior to Mickey Mouse, what other cartoon mascot did Walt Disney create?',
                    a:'Oswald the Rabbit',
                    b:'Harvey the Rabbit',
                    c:'Wrigley the Wombat',
                    d:'Sonic the Hedgehog',
                    correctAnswer:'a'
                },
                {
                    question:'This method of transfering a live action image to animation was used throughout classic Disney animation.',
                    a:'Telescoping',
                    b:'Rotoscoping',
                    c:'Kinetoscoping',
                    d:'Fluoroscopy',
                    correctAnswer:'b'
                },
                {
                    question:'In addition to Optimus Prime, Peter Cullen also voiced this famous character:',
                    a:'Batman',
                    b:'Mickey Mouse',
                    c:'Megatron',
                    d:'Eeyore',
                    correctAnswer:'d'
                },
                {
                    question:'Mickey Mouse was almost named this d(r)eadful name:',
                    a:'Maleficent',
                    b:'Mortimer',
                    c:'Maxwell',
                    d:'Rockso',
                    correctAnswer:'b'
                },
                {
                    question:'This cartoon duck was a favorite of dictator Benito Mussolini:',
                    a:'Donald',
                    b:'Daffy',
                    c:'Scrooge',
                    d:'il Ducke',
                    correctAnswer:'a'
                },
                {
                    question:'In addition to Bugs, Daffy, and Porky, this creator also contributed to the creation of Droopy Dog and Screwy Squirrel:',
                    a:'Walt Disney',
                    b:'Hayao Miyazaki',
                    c:'Tex Avery',
                    d:'William Hanna',
                    correctAnswer:'c'
                },
                {
                    question:'Prior to forming their own production company, William Hanna and Joseph Barbera created this cartoon duo for MGM:',
                    a:'Fred and Barney',
                    b:'Tom and Jerry',
                    c:'Popeye and Olive Oyl',
                    d:'Chip and Dale',
                    correctAnswer:'b'
                },
                {
                    question:'In addition to the title characters, this show also contained shorts starring Dudley Do-Right and Mr. Peabody, a time-traveling dog.',
                    a:'The Adventures of Rocky and Bullwinkle',
                    b:'Looney Tunes',
                    c:'The Animaniacs',
                    d:'Mr. Magoo and his Friends',
                    correctAnswer:'a'
                },
                {
                    question:'Fantasmagorie, commonly considered the first traditionally animated film, was released in the year:',
                    a:'1921',
                    b:'1912',
                    c:'1899',
                    d:'1908',
                    correctAnswer:'d'
                },
                {
                    question:'Walt Disney originally owned this corporation, which went brankrupt in 1923:',
                    a:'Inkwell Studios',
                    b:'Laugh-O-Grams',
                    c:'Phonofilm',
                    d:'Warner Brothers',
                    correctAnswer:'b'
                },
                {
                    question:'This show was the first animated prime-time sitcom:',
                    a:'Sabrina and the Groovy Goolies',
                    b:'The Flintstones',
                    c:'The Simpsons',
                    d:'Crusader Rabbit',
                    correctAnswer:'b'
                },
                {
                    question:'In 2003 this groundbreaking Soviet cartoon was ranked No. 1 in a poll of the best animated films of all time by animators from around the world:',
                    a:'The Owl and the White Horse',
                    b:'Baba Yaga',
                    c:'Hedgehog in the Fog',
                    d:'Joeseph Stalin and the Leningrad Kids',
                    correctAnswer:'c'
                },
            ];

                var timerBarNumber = 20000;                             //for use for the bar
                var questionNumber = 0;                                 //which part of the question arrary are we on
                var gameIsTakingInput = false;                              //are we accepting input currently
                var gameIsFinished = false;                             //is the game done running
                var answersCorrect = 0;                                 //number of correct answers
                var gameIntro = true;                                   //game intro needs to be played
                var currentTriviaQuestion = questions[9];
                var messages = {
                    right: "Nice job!",
                    wrong: "Sorry, incorrect.",
                    timeOut: "You didn't answer in time!",
                    gameFinished: "That was the last question!"
                }
                var numberOfQuestions = questions.length;
                var intervalId;
                var openingMusic = document.getElementById("titleAudio");
                var questionMusic = document.getElementById("gameAudio");


                console.log(questions[1].correctAnswer);
                console.log(questions[0].c);
                console.log(questions[9]);
                console.log(questions.length);
                console.log(currentTriviaQuestion);

                $('.gamePlay').css('display','none');
                $('.gameScore').css('display','none');
                $('.gameFinalScore').css('display','none');


                //NICE! This appears to be the correct format for doing this. Time to do some blocking and assets,
                //with this correct everything else is just blocking, intervals and assets

                //RESET FUNCTION FOR THE END
                //      -AFTER FINAL QUESTION DISPLAY HIDE ALL OF THE THINGS
                //      -REVEAL SUMMARY SCREEN AND RESET

                // function playAudio() { 
                //     openingMusic.play(); 
                // }

                function gameIntroCard() {

                    
                    //Okay, it seems that chome has updated and prevents autoplaying music if something hasn't interacted
                    //to solve this (since I want intro music to play on quiz start) I'm thinking of organizing things this way
                    // START/LOAD SCREEN/READY? --> GOES TO ASK QUESTION --> IF, IN ASKQUESTION, gameIntro == TRUE, play titleCard function (which does the intro)
                    //& sets gameIntro = FALSE, then calls ASKQUESTION again, which now proceeds through normal play
                    


                }

                //This is a WAY more involved method of playing sound that I'm not sure what the advantage of using it is

                // function playSound(url){

                //     var audio = document.createElement('audio');
                //     audio.style.display = "none";
                //     audio.src = 'assets/music/merry_melodies_opening.mp3';
                //     audio.autoplay = true;
                //     audio.onended = function(){
                //         audio.remove() //Remove when played.
                //     };
                //     document.body.appendChild(audio);

                // }                

                function newgame () {

                    gameIntro = false;
                    answersCorrect = 0;
                    questionNumber = 0;
                    gameIsFinished = false; 
                    gameIsTakingInput = false;
                    currentTriviaQuestion = questions[0];
                    
                    //NOT DELETING THIS UNTIL I'M SURE I WON'T NEED THE REFERENCE
                    // playSound("assets/music/merry_melodies_opening.mp3");

                   // playAudio();
                //    var audio = new Audio('assets/music/merry_melodies_opening.mp3');
                //    setTimeout(function(){playSound();}, 1000);
                    openingMusic.load();
                    openingMusic.volume = 0.2;
                    setTimeout(function(){openingMusic.play();}, 1000);

                    $('.titleImage').css('display','block');
                    $('.gameFinalScore').css('display','none');

                }

                function questionTimer(){

                }

                function askQuestions() {
                    // questionMusic.load();
                    // questionMusic.volume = 0.01; //waaaay more irritating then I thought it'd be -- maybe do a toggle?
                    // questionMusic.play();
                    currentTriviaQuestion = questions[questionNumber];
                    $('.titleImage').css('display', 'none');
                    $('.gamePlay').css('display','block');
                    $('.questionText').html(currentTriviaQuestion.question);
                    $('.aValue').html(currentTriviaQuestion.a);
                    $('.bValue').html(currentTriviaQuestion.b);
                    $('.cValue').html(currentTriviaQuestion.c);
                    $('.dValue').html(currentTriviaQuestion.d);
                    gameIsTakingInput = true;
                    $('#extendingTimeBar').css('width','100%');
                    $('#extendingTimeBar').animate({width: "0%"}, 20000, 'linear');
                    intervalId = setInterval(function(){answerSheet('timeup');}, 20000)
                }

                function answerSheet(answer) {
                    // questionMusic.pause();
                    console.log(intervalId);
                    clearInterval(intervalId);
                    $('.aValue, .bValue, .cValue, .dValue').css('display','none');
                    $('.gameSolution').css('display','block');
                    $('#extendingTimeBar').stop(true, true);
                    $('#extendingTimeBar').css('width','0%');
                                        // or maybe correctcard or wrongcard
                    if (answer === 'right') {
                        $('.theCorrectAnswer').html('<img id="answerImage" src="assets/images/correct.png">');
                        console.log("we hit the right answer");
                        answersCorrect++;
                    }
                    if (answer === 'wrong') {
                        $('.theCorrectAnswer').html('<img id="answerImage" src="assets/images/wrong.png">');
                    }
                    if (answer === 'timeup'){
                        $('.theCorrectAnswer').html('<img id="answerImage" src="assets/images/timesup.png">');
                    }
                    questionNumber++;
                    if (questionNumber < questions.length) {
                        setTimeout(function(){
                            askQuestions(); 
                            $('.gameSolution').css('display','none'); 
                            setTimeout(function(){$('.aValue, .bValue, .cValue, .dValue').css('display', 'block');}, 10);
                        }, 3000);
                    } else {
                        outroCard();
                    }
                }

                function outroCard() {
                    $('.gameSolution, .titleImage, .gamePlay').css('display','none');
                    $('.aValue, .bValue, .cValue, .dValue').css('display', 'block');
                    $('.gameFinalScore').css('display','block');
                    $('.finalScore').text('You Answered ' + answersCorrect + ' out of ' + questions.length + ' correctly');
                }

                //registers the click to start the game

                $('#clickThru').on('click', function() {

                    askQuestions();
                    openingMusic.pause();
                    console.log('this should be paused now'); //stupid google stupid chrome stupid new autoplay rules

                });

                //registers the input from a buttonclick
                $('.answerTextButton').on('click', function() {
                    
                    if (gameIsTakingInput = true){

                        var buttonClick = $(this).attr("value");
                        console.log(buttonClick);
                        console.log(currentTriviaQuestion.correctAnswer);
                        if (buttonClick == currentTriviaQuestion.correctAnswer) {
                            answerSheet('right');
                            console.log("RIGHT!");

                        } else {
                            console.log("WRONG!");
                            answerSheet('wrong');
                        }


                    }
                });

                $('.playAgainButton').on('click', function() {

                    newgame();

                });

            newgame();
                
                  


        </script>



    </body>
</html>



